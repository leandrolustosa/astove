@{
    Layout = null;
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Dados da empresa</h2>
        <ol class="breadcrumb">
            <li>
                <a href="/">Home</a>
            </li>
            <li>
                <a>Empresa</a>
            </li>
            <li class="active">
                <strong>Edição</strong>
            </li>
        </ol>
    </div>
    <div class="col-lg-2">

    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Edição dos dados da empresa</h5>

                <div ibox-tools></div>
            </div>
            <div class="ibox-content">
                <form role="form" name="usuariosForm" ng-submit="submitForm(usuariosForm.$valid)" novalidate>

                    <input id="antiForgeryToken" data-ng-model="antiForgeryToken" type="hidden" data-ng-init="antiForgeryToken='@AstoveHelper.GetAntiForgeryToken()'" />

                    <div ng-show="hasError || success" class="alert alert-dismissible" ng-class="{ 'alert-danger' : hasError, 'alert-success' : success }" role="alert">
                        <button type="button" class="close" ng-click="showAlert=false;"><span aria-hidden="true">×</span><span class="sr-only">Fechar</span></button>
                        <strong>{{messagetype}}!</strong> {{message}}
                    </div>

                    <div class="row">
                        <h4>:: Dados da empresa</h4>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.cnpj.$invalid && !usuariosForm.cnpj.$pristine }">
                            <label>CNPJ</label>
                            <input name="cnpj" type="text" class="form-control input-lg" ng-model="data.model.cnpj" required ng-maxlength="18" ui-mask="99.999.999/9999-99" model-view-value="true" />
                            <p ng-show="usuariosForm.cnpj.$invalid && !usuariosForm.cnpj.$pristine" class="help-block">Informe o campo CNPJ</p>
                            <p ng-show="usuariosForm.cnpj.$error.maxlength" class="help-block">O campo CNPJ deve possuir no máximo 18 caracteres.</p>
                        </div>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.empresanome.$invalid && !usuariosForm.empresanome.$pristine }">
                            <label>Nome Fantasia</label>
                            <input name="empresanome" type="text" class="form-control input-lg" ng-model="data.model.empresaNome" required ng-maxlength="300" />
                            <p ng-show="usuariosForm.empresanome.$invalid && !usuariosForm.empresanome.$pristine" class="help-block">Informe o campo Nome Fantasia</p>
                            <p ng-show="usuariosForm.empresanome.$error.maxlength" class="help-block">O campo Nome Fantasia deve possuir no máximo 300 caracteres.</p>
                        </div>
                        <div class="col-md-6 form-group" ng-class="{ 'has-error' : usuariosForm.razaosocial.$invalid && !usuariosForm.razaosocial.$pristine }">
                            <label>Razão Social</label>
                            <input name="razaosocial" type="text" class="form-control input-lg" ng-model="data.model.razaoSocial" required ng-maxlength="300" />
                            <p ng-show="usuariosForm.razaosocial.$invalid && !usuariosForm.razaosocial.$pristine" class="help-block">Informe o campo Razão Social</p>
                            <p ng-show="usuariosForm.razaosocial.$error.maxlength" class="help-block">O campo Razão Social deve possuir no máximo 300 caracteres.</p>
                        </div>
                        <div class="col-md-2 form-group" ng-class="{ 'has-error' : usuariosForm.cep.$invalid && !usuariosForm.cep.$pristine }">
                            <label>CEP</label>
                            <input name="cep" type="text" class="form-control input-lg" ng-change="getCep(data.model.cep)" ng-model="data.model.cep" required ng-maxlength="10" ui-mask="99999-999" model-view-value="true" />
                            <p ng-show="usuariosForm.cep.$invalid && !usuariosForm.cep.$pristine" class="help-block">Informe o campo CEP</p>
                            <p ng-show="usuariosForm.cep.$error.maxlength" class="help-block">O campo CEP deve possuir no máximo 10 caracteres.</p>
                        </div>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.cidade.$invalid && !usuariosForm.cidade.$pristine }">
                            <label>Cidade</label>
                            <input name="cidade" type="text" class="form-control input-lg" ng-model="data.model.cidade" required ng-maxlength="50" />
                            <p ng-show="usuariosForm.cidade.$invalid && !usuariosForm.cidade.$pristine" class="help-block">Informe o campo Cidade</p>
                            <p ng-show="usuariosForm.cidade.$error.maxlength" class="help-block">O campo Cidade deve possuir no máximo 50 caracteres.</p>
                        </div>
                        <div class="col-md-1 form-group" ng-class="{ 'has-error' : usuariosForm.siglauf.$invalid && !usuariosForm.siglauf.$pristine }">
                            <label>UF</label>
                            <input name="siglauf" type="text" class="form-control input-lg" ng-model="data.model.siglaUF" required ng-maxlength="2" />
                            <p ng-show="usuariosForm.siglauf.$invalid && !usuariosForm.siglauf.$pristine" class="help-block">Informe o campo UF</p>
                            <p ng-show="usuariosForm.siglauf.$error.maxlength" class="help-block">O campo UF deve possuir no máximo 2 caracteres.</p>
                        </div>
                    </div>

                    <div class="row">
                        <h4>:: Seus dados</h4>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.cpf.$invalid && !usuariosForm.cpf.$pristine }">
                            <label>CPF</label>
                            <input name="cpf" type="text" class="form-control input-lg" ng-model="data.model.cpf" required ng-maxlength="14" ui-mask="999.999.999-99" model-view-value="true" />
                            <p ng-show="usuariosForm.cpf.$invalid && !usuariosForm.cpf.$pristine" class="help-block">Informe o campo CPF</p>
                            <p ng-show="usuariosForm.cpf.$error.maxlength" class="help-block">O campo CPF deve possuir no máximo 14 caracteres.</p>
                        </div>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.nome.$invalid && !usuariosForm.nome.$pristine }">
                            <label>Nome</label>
                            <input name="nome" type="text" class="form-control input-lg" ng-model="data.model.nome" required ng-maxlength="50" />
                            <p ng-show="usuariosForm.nome.$invalid && !usuariosForm.nome.$pristine" class="help-block">Informe o campo Nome</p>
                            <p ng-show="usuariosForm.nome.$error.maxlength" class="help-block">O campo Nome deve possuir no máximo 50 caracteres.</p>
                        </div>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.phonenumber.$invalid && !usuariosForm.phonenumber.$pristine }">
                            <label>Celular</label>
                            <input name="phonenumber" type="text" class="form-control input-lg" ng-model="data.model.phoneNumber" required ng-maxlength="15" ng-change="setCelularMask()" ui-mask="{{celularMask}}" model-view-value="true" />
                            <p ng-show="usuariosForm.phonenumber.$invalid && !usuariosForm.phonenumber.$pristine" class="help-block">Informe o campo Celular</p>
                            <p ng-show="usuariosForm.phonenumber.$error.maxlength" class="help-block">O campo Celular deve possuir no máximo 15 caracteres.</p>
                        </div>
                        <div class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.cargo.$invalid && !usuariosForm.cargo.$pristine }">
                            <label>Cargo</label>
                            <input name="cargo" type="text" class="form-control input-lg" ng-model="data.model.cargo" ng-maxlength="50" />
                            <p ng-show="usuariosForm.cargo.$error.maxlength" class="help-block">O campo Cargo deve possuir no máximo 50 caracteres.</p>
                        </div>

                        <div class="col-md-12 form-group" ng-class="{ 'has-error' : usuariosForm.image.$invalid && !usuariosForm.image.$pristine }">
                            <label>Imagem</label>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="m-b-md"><input type="file" id="fileInput$fotoUrl" class="form-control fileInputImage" ngf-select ngf-change="onImageSelect($files, $event)" ngf-multiple="false" ngf-accept="'*.jpg,*.png'" /></div>
                                    <div class="cropArea"><img-crop id="imgCrop$fotoUrl" area-type="circle" image="data.model.fotoUrlSource" result-image="data.model.fotoUrl" area-coords="areaCoords" aspect-ratio="aspectRatio" on-change="onChanged($dataURI, $imageData, $itemId)"></img-crop></div>

                                </div>
                                <div class="col-md-6">
                                    <h4>Imagem recortada</h4>
                                    <div class="m-b-md"><img ng-src="{{data.model.fotoUrl}}" width="{{areaCoords.w}}" height="{{areaCoords.h}}" /></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <h4>:: Dados de acesso (altere apenas se quiser modificar e-mail/senha)</h4>
                        <div class="form-group" ng-class="{ 'has-error' : usuariosForm.email.$invalid && !usuariosForm.email.$pristine, 'col-md-4': !data.model.permiteAlterarSenha, 'col-md-3': data.model.permiteAlterarSenha }">
                            <label>E-mail</label>
                            <input name="email" type="text" class="form-control input-lg" ng-model="data.model.newEmail" ng-disabled="!data.model.permiteAlterarSenha" required />
                            <p ng-show="usuariosForm.email.$invalid && !usuariosForm.email.$pristine" class="help-block">Informe o campo e-mail</p>
                        </div>
                        <div ng-if="data.model.permiteAlterarSenha" class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.password.$invalid && !usuariosForm.password.$pristine }">
                            <label>Senha atual</label>
                            <input name="password" type="password" class="form-control input-lg" ng-model="data.model.password" ng-maxlength="100" ng-minlength="4" />
                            <p ng-show="usuariosForm.password.$invalid && !usuariosForm.password.$pristine" class="help-block">Informe o campo Senha atual</p>
                            <p ng-show="usuariosForm.password.$error.minlength" class="help-block">O campo Senha deve possuir no mínimo 6 caracteres.</p>
                            <p ng-show="usuariosForm.password.$error.maxlength" class="help-block">O campo Senha deve possuir no máximo 100 caracteres.</p>
                        </div>
                        <div ng-if="data.model.permiteAlterarSenha" class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.password.$invalid && !usuariosForm.password.$pristine }">
                            <label>Nova senha</label>
                            <input name="password" type="password" class="form-control input-lg" ng-model="data.model.newPassword" ng-maxlength="100" ng-minlength="4" />
                            <p ng-show="usuariosForm.password.$invalid && !usuariosForm.password.$pristine" class="help-block">Informe o campo Nova Senha</p>
                            <p ng-show="usuariosForm.password.$error.minlength" class="help-block">O campo Senha deve possuir no mínimo 6 caracteres.</p>
                            <p ng-show="usuariosForm.password.$error.maxlength" class="help-block">O campo Senha deve possuir no máximo 100 caracteres.</p>
                        </div>
                        <div ng-if="data.model.permiteAlterarSenha" class="col-md-3 form-group" ng-class="{ 'has-error' : usuariosForm.confirmpassword.$invalid && !usuariosForm.confirmpassword.$pristine }">
                            <label>Confirme a sua senha</label>
                            <input name="confirmpassword" type="password" class="form-control input-lg" ng-model="data.model.confirmPassword" />
                        </div>
                    </div>


                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary btn-lg pull-right" ng-disabled="usuariosForm.$invalid">Enviar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>